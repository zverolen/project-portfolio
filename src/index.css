@layer reset, tokens, general, specific, theme.light, theme.dark, states, overrides;

@import url("font.css");
@import url("tokens.css") layer(tokens);
@import url("reset.css") layer(reset);

@layer overrides {
  /* Visually hidden elements are visible to screen readers */
  .visually-hidden {
    clip-path: inset(100%);
    clip: rect(1px, 1px, 1px, 1px);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }
}

@media (prefers-color-scheme: light) {
  @layer theme.light {
    :root {
      --site-text-color: var(--colorBlack);
      --site-background-color: var(--colorWhite);
      --skills-background-color: var(--colorGreyLight);
      --accent-color: var(--colorPurple);
      --text-link-color: var(--colorGreyDark);
      --footer-background-color: var(--site-text-color);
      --decorative-color-I: var(--colorRed);
      --decorative-color-II: var(--colorBlue);
    }

    body {
      --text-color: var(--site-text-color);
      --background-color: var(--site-background-color)
    }

    h1 span:nth-child(1), h1 span:nth-child(3) {
      --text-color: var(--site-background-color);
    }

    h1 span:nth-child(1) {
      --background-color: var(--decorative-color-I);
    }

    h1 span:nth-child(2) {
      --text-color: var(--accent-color);
    }

    h1 span:nth-child(3) {
      --background-color: var(--decorative-color-II);
    }

    header svg {
      --stroke-color: var(--accent-color);
      --fill-color: var(--site-background-color);
    }

    .skills {
      --background-color: var(--skills-background-color);
    }

    .skills div:nth-child(1)::after {
      --border-color: var(--accent-color);
    }

    .projects > div:nth-child(1) {
      --background-color: var(--accent-color);
      --text-color: var(--site-background-color);
    }

    .projects > div:nth-child(1)::after {
      --border-color: var(--site-text-color);
    }

    .project {
      --border-color: var(--site-text-color);
    }

    .project svg rect:nth-child(1) {
      --fill-color: var(--decorative-color-I);
      --stroke-color: var(--fill-color);
    }

    .project svg rect:nth-child(2) {
      --fill-color: var(--decorative-color-II);
      --stroke-color: var(--fill-color);
    }

    .project svg rect:nth-child(3) {
      --fill-color: none;
      --stroke-color: var(--site-text-color);
    }

    .project a {
      --text-color: var(--text-link-color);
      --background-color: var(--text-background-color);
    }

    .about, footer {
      --background-color: var(--site-text-color);
      --text-color: var(--site-background-color);
    }

    footer path {
      --stroke-color: var(--site-background-color);
      --fill-color: var(--footer-background-color);
    }
  }
}

@media (prefers-color-scheme: dark) {
  @layer theme.light {
    :root {
      --site-text-color: var(--colorBlack);
      --site-background-color: var(--colorWhite);
      --skills-background-color: var(--colorGreyLight);
      --accent-color: var(--colorPurple);
      --text-link-color: var(--colorGreyDark);
      --footer-background-color: var(--site-text-color);
      --decorative-color-I: var(--colorRed);
      --decorative-color-II: var(--colorBlue);
    }

    body {
      --text-color: var(--site-text-color);
      --background-color: var(--site-background-color)
    }

    h1 span:nth-child(1), h1 span:nth-child(3) {
      --text-color: var(--site-background-color);
    }

    h1 span:nth-child(1) {
      --background-color: var(--decorative-color-I);
    }

    h1 span:nth-child(2) {
      --text-color: var(--accent-color);
    }

    h1 span:nth-child(3) {
      --background-color: var(--decorative-color-II);
    }

    header svg {
      --stroke-color: var(--accent-color);
      --fill-color: var(--site-background-color);
    }

    .skills {
      --background-color: var(--skills-background-color);
    }

    .skills div:nth-child(1)::after {
      --border-color: var(--accent-color);
    }

    .projects > div:nth-child(1) {
      --background-color: var(--accent-color);
      --text-color: var(--site-background-color);
    }

    .projects > div:nth-child(1)::after {
      --border-color: var(--site-text-color);
    }

    .project {
      --border-color: var(--site-text-color);
    }

    .project svg rect:nth-child(1) {
      --fill-color: var(--decorative-color-I);
      --stroke-color: var(--fill-color);
    }

    .project svg rect:nth-child(2) {
      --fill-color: var(--decorative-color-II);
      --stroke-color: var(--fill-color);
    }

    .project svg rect:nth-child(3) {
      --fill-color: none;
      --stroke-color: var(--site-text-color);
    }

    .project a {
      --text-color: var(--text-link-color);
      --background-color: var(--text-background-color);
    }

    .about, footer {
      --background-color: var(--site-text-color);
      --text-color: var(--site-background-color);
    }

    footer path {
      --stroke-color: var(--site-background-color);
      --fill-color: var(--footer-background-color);
    }
  }
}

@layer general {
  body {
    font-family: var(--body-text-font-family);
    font-size: clamp(var(--textSizeMin), var(--textSizeIdeal), var(--textSizeMax));
    font-weight: var(--fontWeightPrimary);

    color: var(--text-color);
    background-color: var(--background-color);
  }

  @media (prefers-reduced-motion: no-preference) {
    a, path {
      transition: all 0.3s ease-out;
    }
  }
  
  h1, h2, h3 {
    font-weight: var(--fontWeightSecondary);
  }
  
  h1 {
    font-family: var(--heading-font-family);
  }

  h1 span:nth-child(1) {
    color: var(--text-color);
    background-color: var(--background-color);
  }

  h1 span:nth-child(2) {
    color: var(--text-color);
  }

  h1 span:nth-child(3) {
    color: var(--text-color);
    background-color: var(--background-color);
  }
  
  header a {
    display: inline-block;
    width: clamp(3.125rem, 10.2222222222vw, 5.875rem);
    height: clamp(3.125rem, 10.2222222222vw, 5.875rem);
    cursor: pointer;
  }
  
  header svg {
    width: 100%;
    stroke: var(--stroke-color);
    stroke-width: min(0.3571428571vw, 0.125rem);
    fill: var(--fill-color);
  }

  .skills {
    position: relative;

    display: flex;
    flex-direction: column;
    row-gap: min(var(--skills-gap-min), var(--skills-gap-max));

    padding-bottom: min(var(--skills-padding-bottom-min), var(--skills-padding-bottom-max));
    
    background-color: var(--background-color);
  }

  .skills > div:nth-child(1) {
    position: relative;

    display: flex;
    flex-direction: column;
    justify-content: center;
    
    width: var(--skillsHeadingWidth);
    margin-inline: var(--centering-margin);
    font-size: clamp(var(--skillsHeadingFontMin), var(--skillsHeadingFontIdeal), var(--skillsHeadingFontMax));
  }

  .skills div:nth-child(1)::after {
    content: "";
    position: absolute;
    height: var(--skillsHeadingFrameHeight);
    width: var(--fullWidth);
    border: var(--border-width) var(--border-color) solid;
  }

  .skills h2 {
    margin: var(--resetMargin);

    text-align: center;
    font-size: inherit;
  }

  .skills ul {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    column-gap: var(--skillsHorizontalGap);
    row-gap: var(--skillsVerticalGap);

    width: var(--site-width);
    margin-inline: var(--centering-margin);
  }

  .skills li {
    text-transform: var(--skillsTextTransform);
  }

  .skills ul:nth-of-type(1) li {
    font-size: clamp(var(--skillPrimaryFontMin), var(--skillPrimaryFontIdeal), var(--skillPrimaryFontMax));
  }

  .skills ul:nth-of-type(2) li {
    font-size: clamp(var(--skillSecondaryFontMin), var(--skillSecondaryFontIdeal), var(--skillSecondaryFontMax));
  }

  .projects > div:nth-child(1) {
    position: relative;

    font-size: clamp(var(--headingTwoFontMin), var(--headingTwoFontIdeal), var(--headingTwoFontMax));
    background-color: var(--background-color);
  }

  .projects > div:nth-child(1)::after {
    content: "";
    position: absolute;
    left: var(--resetNumber);
    bottom: var(--verticalCenteringBottom);
    transform: var(--verticalCenteringTranslate);

    width: var(--projectsHeadingFrameWidth);
    height: var(--projectsHeadingFrameHeight);

    border: var(--border-width) var(--border-color) solid;
    border-left-width: var(--resetNumber);
  }

  .projects h2 {
    width: var(--site-width);
    margin-inline: var(--centering-margin);

    font-family: var(--heading-font-family);
    font-size: inherit;
    color: var(--text-color);
  }

  .projects > div:first-child + p {
    width: var(--site-width);
    margin-inline: var(--centering-margin);
    margin-block-start: min(var(--projectsNoteMarginTopMin), var(--projectsNoteMarginMax));
    margin-block-end: min(var(--projectsNoteMarginBottomMin), var(--projectsNoteMarginMax));
  }

  .projects > ul {
    display: flex;
    flex-direction: column;
    row-gap: var(--projects-gap);
    width: var(--site-width);
    margin-inline: var(--centering-margin);
  }

  .project {
    display: flex;
    flex-direction: column;
    row-gap: var(--projects-gap);
    padding: var(--projects-gap);
    border: var(--border-width) var(--border-color) solid;
  }

  .project > div {
    display: flex;
    flex-direction: column;
    row-gap: var(--projects-gap);
  }

  .project h3 + div {
    display: flex;
    flex-direction: column;
    row-gap: var(--projects-gap);
  }

  .projects h3, .projects h4 {
    font-size: clamp(var(--projectsSubheadingFontMin), var(--projectsSubheadingFontIdeal), var(--projectsSubheadingFontMax));
  }

  .projects img {
    margin-block-end: var(--gap-II);
  }

  .project h3 + div > div, .project ul {
    display: flex;
    flex-direction: column;
    row-gap: var(--project-features-gap);
  }

  .project li {
    display: flex;
    align-items: baseline;
    column-gap: var(--project-features-gap);

    list-style: none;
  }

  .project li span:nth-child(1) {
    flex-shrink: 0;
  }

  .project svg {
    width: var(--project-bullet-size);
    height: var(--project-bullet-size);
  }


  .project svg rect {
    fill: var(--fill-color);
    stroke: var(--stroke-color);
  }

  .project a {
    font-weight: var(--fontWeightAlternative);
    color: var(--text-color);
    background-color: var(--background-color);
  }

  .about {
    color: var(--text-color);
    background-color: var(--background-color);
  }
  
  footer {
    color: var(--text-color);
    background-color: var(--background-color);
  }

  footer a {
    display: block;
    width: clamp(3.125rem, 10.2222222222vw, 5.875rem);
    height: clamp(3.125rem, 10.2222222222vw, 5.875rem);
    cursor: pointer;
  }
  
  footer svg {
    /* position: relative;
    bottom: min(1.3333333333vw, 0.75rem); */
    width: 100%;
    fill: none;
    stroke-width: min(0.3571428571vw, 0.125rem);
  }

  footer path {
    stroke: var(--stroke-color);
    fill: var(--fill-color);
  }
}

@layer states {
  header a:hover svg, header a:focus-visible svg {
    --fill-color: var(--accent-color)
  }

  .project a:hover, .project a:focus-visible {
    --text-color: var(--site-background-color);
    --background-color: var(--text-link-color);
  }

  footer a:hover path, footer a:focus-visible path{
    --fill-color: var(--site-background-color);
  }
}